<% if user_signed_in? %>
  <!-- ログインしているユーザー向けのコンテンツ -->
  <div class="intro-section">
    <h1>ようこそ!EverydaySaunaApp!</h1>
    <p>このアプリでは、以下のようなことができます：</p>
    <ul>
      <li>サウナの検索とフィルタリング</li>
      <li>最新のサ活（ユーザー投稿）の確認</li>
      <li>サウナ施設の情報をチェック</li>
    </ul>
  </div>

  <div class="latest-posts">
    <h2>新着サ活</h2>
    <% if @latest_posts.present? %>
      <% @latest_posts.each do |post| %>
        <div class="post-card">
          <h3><%= link_to post.title, post_path(post) %></h3>
          <p><%= post.content.truncate(100) %></p>
          <p><strong>投稿日:</strong> <%= post.created_at.strftime('%Y年%m月%d日') %></p>
        </div>
      <% end %>
    <% else %>
      <p>新着サ活はありません。</p>
    <% end %>
  </div>

  <div class="featured-saunas">
    <h2>おすすめのサウナ施設</h2>
    <% if @featured_saunas.present? %>
      <% @featured_saunas.each do |sauna| %>
        <div class="sauna-card">
          <h3><%= link_to sauna.name, sauna_path(sauna) %></h3>
          <p><strong>場所:</strong> <%= sauna.location %></p>
          <p><strong>サウナ温度:</strong> <%= sauna.sauna_temperature %>℃</p>
        </div>
      <% end %>
    <% else %>
      <p>おすすめのサウナ施設はありません。</p>
    <% end %>
  </div>

  <h1 class="page-title">サウナ一覧</h1>

  <%= form_with url: saunas_path, method: :get, local: true, class: 'search-form' do |f| %>
    <div class="form-group">
      <%= f.label :query, '検索:' %>
      <%= f.text_field :query, class: 'form-control', placeholder: '施設名や場所で検索', value: params[:query] %>
    </div>

    <div class="form-group">
      <%= f.label :temperature_max, 'サウナ温度の最大値:' %>
      <%= f.number_field :temperature_max, class: 'form-control', value: params[:temperature_max], step: 1 %>
    </div>

    <div class="form-group">
      <%= f.label :location, '場所:' %>
      <%= f.text_field :location, class: 'form-control', placeholder: '例: 東京都新宿区', value: params[:location] %>
    </div>

    <div class="form-group">
      <%= f.label :has_hot_spring, '温泉の有無:' %>
      <%= f.select :has_hot_spring, options_for_select([['有り', 'true'], ['無し', 'false']], params[:has_hot_spring]), {}, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= f.label :rolyu, 'ロウリュ:' %>
      <%= f.select :rolyu, options_for_select([['有り', 'true'], ['無し', 'false']], params[:rolyu]), {}, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= f.label :aufguss, 'アウフグース:' %>
      <%= f.select :aufguss, options_for_select([['有り', 'true'], ['無し', 'false']], params[:aufguss]), {}, class: 'form-control' %>
    </div>

    <%= f.submit '検索', class: 'btn btn-primary' %>
  <% end %>

  <div class="sauna-list">
    <% @saunas.each do |sauna| %>
      <div class="sauna-card">
        <h2><%= link_to sauna.name, sauna_path(sauna), class: 'sauna-name' %></h2>
        <p><strong>場所:</strong> <%= sauna.location %></p>
        <p><strong>サウナ温度:</strong> <%= sauna.sauna_temperature %>℃</p>
        <p><strong>水風呂温度:</strong> <%= sauna.water_temperature %>℃</p>
        <p><strong>ロウリュー:</strong> <%= sauna.rolyu ? '有り' : '無し' %></p>
        <p><strong>アウフグース:</strong> <%= sauna.aufguss ? '有り' : '無し' %></p>
        <p><strong>温泉の有無:</strong> <%= sauna.has_hot_spring ? '有り' : '無し' %></p>
      </div>
    <% end %>
  </div>

<% else %>
  <!-- ログインしていないユーザー向けのコンテンツ -->
  <div class="intro-section">
    <h1>ようこそ！</h1>
    <p>このアプリでは、以下のようなことができます：</p>
    <ul>
      <li>サウナの検索とフィルタリング</li>
      <li>最新のサ活（ユーザー投稿）の確認</li>
      <li>サウナ施設の情報をチェック</li>
    </ul>
    <p>ぜひ登録して、より多くの機能を体験してみてください！</p>
  </div>

  <div class="latest-posts">
    <h2>新着サ活</h2>
    <% if @latest_posts.present? %>
      <% @latest_posts.each do |post| %>
        <div class="post-card">
          <h3><%= link_to post.title, post_path(post) %></h3>
          <p><%= post.content.truncate(100) %></p>
          <p><strong>投稿日:</strong> <%= post.created_at.strftime('%Y年%m月%d日') %></p>
        </div>
      <% end %>
    <% else %>
      <p>新着サ活はありません。</p>
    <% end %>
  </div>

  <div class="featured-saunas">
    <h2>おすすめのサウナ施設</h2>
    <% if @featured_saunas.present? %>
      <% @featured_saunas.each do |sauna| %>
        <div class="sauna-card">
          <h3><%= link_to sauna.name, sauna_path(sauna) %></h3>
          <p><strong>場所:</strong> <%= sauna.location %></p>
          <p><strong>サウナ温度:</strong> <%= sauna.sauna_temperature %>℃</p>
        </div>
      <% end %>
    <% else %>
      <p>おすすめのサウナ施設はありません。</p>
    <% end %>
  </div>
<% end %>
